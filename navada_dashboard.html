<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InsightLabs powered by NAVADA - AI Jobs Intelligence</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e0e0e0;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(30, 30, 60, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .header.scrolled {
            background: rgba(20, 20, 40, 0.98);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo h1 {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 2px;
            filter: drop-shadow(0 0 10px rgba(100, 181, 246, 0.6))
                    drop-shadow(0 0 20px rgba(129, 199, 132, 0.4));
            animation: header-glow 3s ease-in-out infinite alternate;
        }

        @keyframes header-glow {
            from {
                filter: drop-shadow(0 0 10px rgba(100, 181, 246, 0.6))
                        drop-shadow(0 0 20px rgba(129, 199, 132, 0.4));
            }
            to {
                filter: drop-shadow(0 0 15px rgba(100, 181, 246, 0.8))
                        drop-shadow(0 0 30px rgba(129, 199, 132, 0.6));
            }
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .chat-toggle {
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(100, 181, 246, 0.3);
        }

        .chat-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(100, 181, 246, 0.4);
        }

        .live-indicator {
            background: #ff4444;
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            animation: blink 1.5s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.6; }
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            margin-top: 80px;
            padding: 20px;
            transition: margin-right 0.3s ease;
        }

        .main-content.chat-open {
            margin-right: 450px;
        }

        /* Charts Grid */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            padding: 0 10px;
        }

        .chart-card {
            background: rgba(40, 40, 70, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            animation: fadeInUp 0.6s ease-out;
        }

        .chart-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(100, 181, 246, 0.3);
        }

        .enhanced-chart {
            border: 1px solid rgba(76, 175, 80, 0.3);
            background: rgba(45, 45, 75, 0.95);
        }

        .enhanced-chart:hover {
            border: 1px solid rgba(76, 175, 80, 0.5);
            box-shadow: 0 12px 40px rgba(76, 175, 80, 0.2);
        }

        .new-badge {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            font-size: 0.7em;
            padding: 4px 8px;
            border-radius: 12px;
            margin-left: 10px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Job Listings Section */
        .job-listings-section {
            background: rgba(40, 40, 70, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeInUp 0.6s ease-out;
        }

        .section-title {
            color: #64b5f6;
            margin-bottom: 25px;
            font-size: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .job-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(60, 60, 90, 0.5);
            border-radius: 15px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            color: #b0b0b0;
            font-size: 12px;
            font-weight: 600;
        }

        .filter-select, .search-input {
            background: rgba(80, 80, 120, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 10px;
            color: #e0e0e0;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .filter-select:focus, .search-input:focus {
            outline: none;
            border-color: #64b5f6;
            box-shadow: 0 0 0 2px rgba(100, 181, 246, 0.2);
        }

        .job-results-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(60, 60, 90, 0.3);
            border-radius: 10px;
        }

        .refresh-btn {
            background: linear-gradient(45deg, #64b5f6, #1976d2);
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .refresh-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(100, 181, 246, 0.3);
        }

        .job-listings-container {
            max-height: 600px;
            overflow-y: auto;
            border-radius: 10px;
            background: rgba(30, 30, 50, 0.5);
            padding: 15px;
        }

        .job-card {
            background: rgba(60, 60, 90, 0.8);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .job-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(100, 181, 246, 0.2);
            border-color: rgba(100, 181, 246, 0.3);
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .job-title {
            color: #64b5f6;
            font-size: 18px;
            font-weight: 600;
            margin: 0;
        }

        .job-company {
            color: #81c784;
            font-size: 16px;
            font-weight: 500;
            margin: 5px 0;
        }

        .job-location {
            color: #ffb74d;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .job-salary {
            color: #a5d6a7;
            font-size: 16px;
            font-weight: 600;
            text-align: right;
        }

        .job-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .job-detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #b0b0b0;
        }

        .job-description {
            color: #d0d0d0;
            font-size: 14px;
            line-height: 1.6;
            margin-top: 15px;
            max-height: 60px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .job-posted {
            color: #9e9e9e;
            font-size: 12px;
            margin-top: 10px;
            font-style: italic;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
            padding: 15px;
        }

        .page-btn {
            background: rgba(100, 181, 246, 0.8);
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .page-btn:hover:not(:disabled) {
            background: rgba(100, 181, 246, 1);
            transform: translateY(-2px);
        }

        .page-btn:disabled {
            background: rgba(100, 100, 100, 0.5);
            cursor: not-allowed;
        }

        /* Chart Modal Styles */
        .chart-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
        }

        .chart-modal-content {
            position: relative;
            margin: auto;
            padding: 20px;
            width: 90%;
            height: 90%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .chart-modal-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .chart-close {
            position: absolute;
            top: 20px;
            right: 30px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            cursor: pointer;
            z-index: 2001;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chart-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .chart-close i {
            color: white;
            font-size: 20px;
        }

        /* Job Detail Modal */
        .job-detail-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .job-detail-content {
            position: relative;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            margin: 5% auto;
            padding: 30px;
            width: 80%;
            max-width: 800px;
            max-height: 80%;
            overflow-y: auto;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .job-detail-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .job-detail-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .job-detail-close i {
            color: white;
            font-size: 18px;
        }

        /* Chart Images Clickable */
        .chart-image {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chart-image:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(100, 181, 246, 0.3);
        }

        .loading-jobs {
            text-align: center;
            padding: 40px;
            color: #b0b0b0;
            font-size: 16px;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chart-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #e0e0e0;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(100, 181, 246, 0.2);
        }

        .chart-title i {
            color: #64b5f6;
            font-size: 1.2em;
        }

        .chart-image {
            width: 100%;
            height: auto;
            border-radius: 15px;
            transition: transform 0.3s ease;
        }

        .chart-image:hover {
            transform: scale(1.02);
        }

        /* Burger Menu */
        .burger-menu {
            display: flex;
            flex-direction: column;
            cursor: pointer;
            padding: 10px;
            gap: 4px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .burger-menu:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .burger-line {
            width: 25px;
            height: 3px;
            background: #64b5f6;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .burger-menu.active .burger-line:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .burger-menu.active .burger-line:nth-child(2) {
            opacity: 0;
        }

        .burger-menu.active .burger-line:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }


        /* Live Status Dashboard */
        .status-dashboard-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
            padding: 0 20px;
        }

        .status-card {
            background: linear-gradient(135deg, rgba(30, 30, 60, 0.95), rgba(20, 20, 50, 0.95));
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 32px;
            border: 1px solid rgba(100, 181, 246, 0.2);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), 0 0 1px rgba(100, 181, 246, 0.5);
            animation: slideInUp 0.5s ease-out;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .status-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #64b5f6, #42a5f5, #64b5f6);
            background-size: 200% 100%;
            animation: shimmer 3s linear infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .status-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.5), 0 0 20px rgba(100, 181, 246, 0.3);
            border-color: rgba(100, 181, 246, 0.4);
        }

        .status-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 28px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }

        .status-header i {
            font-size: 2rem;
            color: #64b5f6;
            background: rgba(100, 181, 246, 0.1);
            padding: 12px;
            border-radius: 12px;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .status-header h3 {
            color: #ffffff;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .status-time {
            font-size: 2rem;
            color: #64b5f6;
            font-weight: 700;
            margin-bottom: 12px;
            text-align: center;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
        }

        .status-subtitle {
            font-size: 0.95rem;
            color: #b0b0b0;
            text-align: center;
            opacity: 0.9;
        }

        .status-numbers {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            position: relative;
            padding: 20px 0;
            margin-top: 10px;
        }

        .status-number-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .status-number-item:hover {
            background: rgba(255, 255, 255, 0.06);
        }

        .status-label {
            display: block;
            font-size: 0.85rem;
            color: #b0b0b0;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: 600;
        }

        .status-value {
            display: block;
            font-size: 2.8rem;
            font-weight: 700;
            line-height: 1;
        }

        .status-value.current {
            color: #64b5f6;
            text-shadow: 0 0 20px rgba(100, 181, 246, 0.5);
        }

        .status-value.previous {
            color: #b0b0b0;
            opacity: 0.6;
        }

        .status-change {
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 12px;
            background: rgba(40, 40, 70, 0.9);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .status-change i {
            font-size: 0.8rem;
        }

        .status-change span {
            font-size: 0.9rem;
            font-weight: 600;
        }

        .status-change.positive {
            color: #81c784;
            border-color: rgba(129, 199, 132, 0.3);
        }

        .status-change.negative {
            color: #ff6b6b;
            border-color: rgba(255, 107, 107, 0.3);
        }

        .status-change.neutral {
            color: #b0b0b0;
            border-color: rgba(176, 176, 176, 0.3);
        }

        /* Dashboard Sections in Main Content */
        .dashboard-section {
            margin: 50px 0;
            padding: 0 20px;
        }

        .section-title {
            font-size: 2.2rem;
            font-weight: 700;
            color: #64b5f6;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
            text-align: center;
            justify-content: center;
            padding: 20px 0;
            border-bottom: 2px solid rgba(100, 181, 246, 0.3);
            position: relative;
        }

        .section-title::before {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            border-radius: 2px;
        }

        .section-title i {
            font-size: 2rem;
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Home Page Styles */
        .home-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: 10000;
            overflow: hidden;
        }

        .home-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #1a1a2e 100%);
        }

        .gradient-orbs {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .orb {
            position: absolute;
            border-radius: 50%;
            opacity: 0.6;
            animation: float 6s ease-in-out infinite;
        }

        .orb-1 {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(100, 181, 246, 0.3) 0%, transparent 70%);
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .orb-2 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(129, 199, 132, 0.2) 0%, transparent 70%);
            top: 50%;
            right: 15%;
            animation-delay: 2s;
        }

        .orb-3 {
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, rgba(100, 181, 246, 0.4) 0%, transparent 70%);
            bottom: 20%;
            left: 30%;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-20px) scale(1.05); }
        }

        .home-content {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 40px 20px;
            text-align: center;
        }

        .logo-container {
            margin-bottom: 50px;
        }

        .logo-main {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
        }


        .brand-title {
            font-size: 6rem;
            font-weight: 900;
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 50%, #64b5f6 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 4px;
            margin: 0;
            padding: 20px 30px;
            position: relative;
            transition: all 0.6s ease;
            cursor: pointer;
            border-radius: 20px;
        }

        /* Dissolve Motion Effect on Hover */
        .brand-title:hover {
            animation: dissolve 0.8s ease-in-out;
            background-position: 100% 100%;
            transform: scale(1.05);
            text-shadow: 0 0 30px rgba(100, 181, 246, 0.8);
        }

        @keyframes dissolve {
            0% {
                opacity: 1;
                filter: blur(0px);
                transform: scale(1);
            }
            25% {
                opacity: 0.7;
                filter: blur(2px);
                transform: scale(0.98);
            }
            50% {
                opacity: 0.3;
                filter: blur(4px);
                transform: scale(0.95);
                letter-spacing: 8px;
            }
            75% {
                opacity: 0.6;
                filter: blur(2px);
                transform: scale(1.02);
                letter-spacing: 6px;
            }
            100% {
                opacity: 1;
                filter: blur(0px);
                transform: scale(1.05);
                letter-spacing: 3px;
            }
        }

        .brand-subtitle {
            font-size: 0.9rem;
            color: #81c784;
            font-weight: 500;
            margin: 0;
            opacity: 0.8;
        }

        .brand-tagline {
            font-size: 1.2rem;
            color: #64b5f6;
            font-weight: 600;
            font-style: italic;
            margin: 10px 0;
            opacity: 0.9;
        }

        .brand-description {
            font-size: 1.1rem;
            color: #e0e0e0;
            max-width: 600px;
            line-height: 1.6;
            margin: 0;
            opacity: 0.8;
        }

        .access-container {
            margin-bottom: 80px;
            margin-top: -30px;
        }

        .access-card {
            background: rgba(40, 40, 70, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 50%;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            width: 280px;
            height: 280px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .access-title {
            color: #64b5f6;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            text-shadow: 0 0 20px rgba(100, 181, 246, 0.6),
                         0 0 40px rgba(100, 181, 246, 0.4),
                         0 0 60px rgba(100, 181, 246, 0.2);
            animation: glow-pulse 2s ease-in-out infinite alternate;
            text-align: center;
        }

        @keyframes glow-pulse {
            from {
                text-shadow: 0 0 20px rgba(100, 181, 246, 0.6),
                             0 0 40px rgba(100, 181, 246, 0.4),
                             0 0 60px rgba(100, 181, 246, 0.2);
            }
            to {
                text-shadow: 0 0 30px rgba(100, 181, 246, 0.8),
                             0 0 60px rgba(100, 181, 246, 0.6),
                             0 0 90px rgba(100, 181, 246, 0.4);
            }
        }

        .access-subtitle {
            color: #b0b0b0;
            font-size: 0.8rem;
            margin-bottom: 15px;
            text-align: center;
        }

        .passkey-input-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 15px;
            width: 100%;
            align-items: center;
            justify-content: center;
        }

        .passkey-field {
            width: 120px;
            padding: 12px 15px;
            background: rgba(60, 60, 90, 0.8);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #e0e0e0;
            font-size: 1rem;
            text-align: center;
            letter-spacing: 2px;
            transition: all 0.3s ease;
        }

        .passkey-field:focus {
            outline: none;
            border-color: #64b5f6;
            box-shadow: 0 0 20px rgba(100, 181, 246, 0.3);
            transform: scale(1.02);
        }

        .access-button {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .access-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(100, 181, 246, 0.4);
        }

        .access-key-icon {
            color: #81c784;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 0 0 15px rgba(129, 199, 132, 0.6),
                         0 0 30px rgba(129, 199, 132, 0.4);
            animation: key-glow 2.5s ease-in-out infinite alternate;
        }

        .access-key-icon:hover {
            transform: scale(1.2);
            text-shadow: 0 0 20px rgba(129, 199, 132, 0.8),
                         0 0 40px rgba(129, 199, 132, 0.6);
        }

        @keyframes key-glow {
            from {
                text-shadow: 0 0 15px rgba(129, 199, 132, 0.6),
                             0 0 30px rgba(129, 199, 132, 0.4);
            }
            to {
                text-shadow: 0 0 25px rgba(129, 199, 132, 0.8),
                             0 0 50px rgba(129, 199, 132, 0.6);
            }
        }

        .access-error {
            color: #ff6b6b;
            font-size: 0.9rem;
            margin-top: 10px;
            display: none;
            align-items: center;
            justify-content: center;
            gap: 8px;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .access-error.show {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        .home-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            max-width: 900px;
            width: 100%;
        }

        .feature-preview {
            background: rgba(40, 40, 70, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            text-align: center;
        }

        .feature-preview:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(100, 181, 246, 0.3);
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.8rem;
            margin: 0 auto 20px;
        }

        .feature-preview h4 {
            color: #64b5f6;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .feature-preview p {
            color: #b0b0b0;
            font-size: 0.95rem;
            line-height: 1.5;
            margin: 0;
        }

        /* Rotate Phone Popup */
        .rotate-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(20, 20, 40, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            color: #e0e0e0;
            z-index: 15000;
            display: none;
            animation: popup-fade-in 0.5s ease-in-out;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
        }

        .rotate-popup.show {
            display: block;
        }

        .rotate-icon {
            font-size: 2rem;
            color: #64b5f6;
            margin-bottom: 10px;
            animation: rotate-hint 2s ease-in-out infinite;
        }

        .rotate-text {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .popup-close {
            background: transparent;
            border: none;
            color: #b0b0b0;
            font-size: 1.2rem;
            cursor: pointer;
            position: absolute;
            top: 10px;
            right: 15px;
            transition: color 0.3s ease;
        }

        .popup-close:hover {
            color: #ff6b6b;
        }

        @keyframes popup-fade-in {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        @keyframes rotate-hint {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-15deg); }
            75% { transform: rotate(15deg); }
        }

        /* Hide popup in landscape mode */
        @media (max-width: 768px) and (orientation: landscape) {
            .rotate-popup {
                display: none !important;
            }
        }

        /* Responsive Design for Home Page */
        @media (max-width: 768px) {
            .brand-title {
                font-size: 3rem;
                letter-spacing: 2px;
                padding: 15px 20px;
            }

            .brand-tagline {
                font-size: 1rem;
            }

            .brand-subtitle {
                font-size: 0.8rem;
            }

            .access-title {
                font-size: 1.2rem;
                text-shadow: 0 0 15px rgba(100, 181, 246, 0.7),
                             0 0 30px rgba(100, 181, 246, 0.5);
            }

            .access-card {
                padding: 20px;
                margin: 0 10px;
                width: 250px;
                height: 250px;
            }

            .home-features {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .passkey-input-container {
                gap: 12px;
            }

            .access-button {
                width: 100%;
                height: 50px;
            }
        }

        /* Side Panel */
        .side-panel {
            position: fixed;
            right: 0;
            top: 0;
            width: 500px;
            height: 100vh;
            background: rgba(20, 20, 40, 0.98);
            backdrop-filter: blur(20px);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.5);
        }

        .side-panel.open {
            transform: translateX(0);
        }

        .side-panel-header {
            padding: 20px;
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .side-panel-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin: 0;
        }

        .side-panel-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .side-panel-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .side-panel-nav {
            padding: 20px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 25px;
            color: #e0e0e0;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            font-size: 16px;
        }

        .nav-item:hover {
            background: rgba(100, 181, 246, 0.1);
            color: #64b5f6;
            transform: translateX(5px);
        }

        .nav-item.active {
            background: rgba(100, 181, 246, 0.2);
            color: #64b5f6;
            border-right: 3px solid #64b5f6;
        }

        .nav-item i {
            font-size: 1.2rem;
            width: 20px;
        }

        .side-panel-content {
            flex: 1;
            overflow-y: auto;
            padding: 0;
        }

        .panel-section {
            display: none;
            height: 100%;
        }

        .panel-section.active {
            display: block;
        }

        /* AI Assistant Styling */
        .assistant-container {
            height: 100%;
            display: flex;
            flex-direction: column;
            background: linear-gradient(145deg, #1a1a2e 0%, #16213e 100%);
        }

        .assistant-header {
            display: flex;
            align-items: center;
            padding: 20px;
            background: rgba(100, 181, 246, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            gap: 15px;
        }

        .assistant-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 4px 15px rgba(100, 181, 246, 0.3);
        }

        .assistant-info h3 {
            margin: 0;
            color: #64b5f6;
            font-size: 1.4rem;
            font-weight: 700;
        }

        .assistant-info p {
            margin: 5px 0 0 0;
            color: #b0b0b0;
            font-size: 0.9rem;
        }

        .assistant-status {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #81c784;
            font-size: 0.9rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #81c784;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .chat-messages-container {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: rgba(30, 30, 60, 0.3);
        }

        .welcome-message {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .assistant-avatar-small {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .message-bubble {
            background: rgba(60, 60, 90, 0.8);
            border-radius: 18px 18px 18px 4px;
            padding: 15px;
            max-width: 100%;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .assistant-bubble {
            background: rgba(100, 181, 246, 0.15);
            border: 1px solid rgba(100, 181, 246, 0.3);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .sender-name {
            font-weight: 600;
            color: #64b5f6;
            font-size: 0.9rem;
        }

        .message-time {
            font-size: 0.8rem;
            color: #999;
        }

        .message-text {
            color: #e0e0e0;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .feature-list {
            margin: 10px 0;
        }

        .feature-item {
            margin: 8px 0;
            padding: 8px 12px;
            background: rgba(100, 181, 246, 0.1);
            border-radius: 8px;
            border-left: 3px solid #64b5f6;
            font-size: 0.9rem;
        }

        .api-setup-section {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .api-setup-card {
            background: rgba(60, 60, 90, 0.6);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .api-setup-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: #64b5f6;
        }

        .api-setup-header h4 {
            margin: 0;
            font-size: 1.1rem;
        }

        .api-setup-description {
            color: #b0b0b0;
            margin-bottom: 15px;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .api-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .api-input-field {
            flex: 1;
            background: rgba(40, 40, 70, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: #e0e0e0;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .api-input-field:focus {
            outline: none;
            border-color: #64b5f6;
            box-shadow: 0 0 0 3px rgba(100, 181, 246, 0.2);
        }

        .api-save-button {
            background: linear-gradient(135deg, #64b5f6 0%, #42a5f5 100%);
            border: none;
            border-radius: 10px;
            padding: 12px 20px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .api-save-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(100, 181, 246, 0.4);
        }

        .api-help-text {
            color: #999;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .api-help-text a {
            color: #64b5f6;
            text-decoration: none;
        }

        .api-help-text a:hover {
            text-decoration: underline;
        }

        .chat-input-area {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(30, 30, 60, 0.5);
        }

        .input-wrapper {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .chat-input-field {
            flex: 1;
            background: rgba(40, 40, 70, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 15px 20px;
            color: #e0e0e0;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        .chat-input-field:focus {
            outline: none;
            border-color: #64b5f6;
            box-shadow: 0 0 0 3px rgba(100, 181, 246, 0.2);
        }

        .chat-input-field:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .send-message-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #64b5f6 0%, #42a5f5 100%);
            border: none;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .send-message-button:hover:not(:disabled) {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(100, 181, 246, 0.4);
        }

        .send-message-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* About Section Styling */
        .about-container {
            height: 100%;
            display: flex;
            flex-direction: column;
            background: linear-gradient(145deg, #1a1a2e 0%, #16213e 100%);
        }

        .about-header {
            display: flex;
            align-items: center;
            padding: 20px;
            background: rgba(100, 181, 246, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            gap: 15px;
        }

        .about-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 4px 15px rgba(100, 181, 246, 0.3);
        }

        .about-info h3 {
            margin: 0;
            color: #64b5f6;
            font-size: 1.4rem;
            font-weight: 700;
        }

        .about-info p {
            margin: 5px 0 0 0;
            color: #b0b0b0;
            font-size: 0.9rem;
        }

        .about-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: rgba(30, 30, 60, 0.3);
        }

        .about-section {
            margin-bottom: 25px;
            background: rgba(60, 60, 90, 0.6);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .about-section h4 {
            color: #64b5f6;
            margin: 0 0 15px 0;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .about-section p {
            color: #e0e0e0;
            line-height: 1.6;
            margin: 0 0 15px 0;
        }

        .feature-list-about {
            color: #e0e0e0;
            margin: 0;
            padding-left: 20px;
        }

        .feature-list-about li {
            margin: 8px 0;
            line-height: 1.5;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .feature-item-about {
            background: rgba(100, 181, 246, 0.1);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid rgba(100, 181, 246, 0.3);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .feature-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #64b5f6 0%, #42a5f5 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .feature-text {
            color: #e0e0e0;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .creator-section {
            background: linear-gradient(135deg, rgba(100, 181, 246, 0.15) 0%, rgba(129, 199, 132, 0.15) 100%);
            border: 1px solid rgba(100, 181, 246, 0.3);
        }

        .creator-info {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .creator-details strong {
            color: #64b5f6;
            font-size: 1.1rem;
        }

        .creator-title {
            color: #81c784;
            font-weight: 600;
        }

        .creator-experience {
            color: #b0b0b0;
            font-style: italic;
        }

        .creator-links {
            display: flex;
            gap: 10px;
        }

        .creator-link {
            background: rgba(100, 181, 246, 0.2);
            color: #64b5f6;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(100, 181, 246, 0.3);
        }

        .creator-link:hover {
            background: rgba(100, 181, 246, 0.3);
            transform: translateY(-2px);
        }

        .creator-bio {
            font-size: 0.9rem;
            line-height: 1.6;
            margin: 0;
        }

        /* Collapsible Chat Panel */
        .chat-panel {
            position: fixed;
            right: 0;
            top: 80px;
            width: 450px;
            height: calc(100vh - 80px);
            background: rgba(30, 30, 60, 0.98);
            backdrop-filter: blur(15px);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 999;
            display: flex;
            flex-direction: column;
            box-shadow: -5px 0 25px rgba(0, 0, 0, 0.3);
        }

        .chat-panel.open {
            transform: translateX(0);
        }

        .chat-header {
            padding: 25px;
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h3 {
            font-size: 1.3rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-chat {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .close-chat:hover {
            transform: rotate(90deg);
        }

        .api-setup {
            padding: 20px;
            background: linear-gradient(135deg, #2d4a6b 0%, #3d5a73 100%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .api-setup h4 {
            color: #81c784;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .api-input-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .api-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #555;
            border-radius: 12px;
            font-size: 14px;
            background: rgba(60, 60, 90, 0.8);
            color: #e0e0e0;
            transition: all 0.3s ease;
        }

        .api-input:focus {
            outline: none;
            border-color: #64b5f6;
            box-shadow: 0 0 0 3px rgba(100, 181, 246, 0.2);
            transform: scale(1.02);
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 6px 20px rgba(100, 181, 246, 0.4);
        }

        .sample-questions {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sample-questions h4 {
            color: #e0e0e0;
            margin-bottom: 15px;
            font-size: 1rem;
        }

        .question-pills {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .question-pill {
            background: rgba(60, 60, 90, 0.8);
            border: 2px solid #555;
            color: #b0b0b0;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .question-pill:hover {
            background: #64b5f6;
            border-color: #64b5f6;
            color: white;
            transform: translateY(-2px) scale(1.05);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            scroll-behavior: smooth;
        }

        .message {
            margin-bottom: 20px;
            animation: slideInMessage 0.5s ease-out;
        }

        @keyframes slideInMessage {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .message-user {
            display: flex;
            justify-content: flex-end;
        }

        .message-ai {
            display: flex;
            justify-content: flex-start;
        }

        .message-bubble {
            max-width: 85%;
            padding: 16px 20px;
            border-radius: 20px;
            position: relative;
            transition: transform 0.2s ease;
        }

        .message-bubble:hover {
            transform: scale(1.02);
        }

        .message-user .message-bubble {
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            color: white;
            border-bottom-right-radius: 6px;
        }

        .message-ai .message-bubble {
            background: rgba(60, 60, 90, 0.9);
            color: #e0e0e0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom-left-radius: 6px;
        }

        .message-sender {
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 8px;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .message-content {
            line-height: 1.5;
        }

        .message-content h3 {
            color: #81c784;
            margin: 10px 0 8px 0;
            font-size: 1.1em;
        }

        .message-content .highlight {
            background: rgba(100, 181, 246, 0.25);
            padding: 2px 6px;
            border-radius: 6px;
            color: #64b5f6;
            font-weight: 600;
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #666;
            font-style: italic;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #64b5f6;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1.2); opacity: 1; }
        }

        .chat-input-area {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(40, 40, 70, 0.9);
        }

        .input-group {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }

        .chat-input {
            flex: 1;
            padding: 14px 18px;
            border: 2px solid #555;
            border-radius: 20px;
            font-size: 14px;
            background: rgba(60, 60, 90, 0.8);
            color: #e0e0e0;
            resize: none;
            min-height: 50px;
            max-height: 120px;
            transition: all 0.3s ease;
        }

        .chat-input:focus {
            outline: none;
            border-color: #64b5f6;
            box-shadow: 0 0 0 3px rgba(100, 181, 246, 0.2);
            transform: scale(1.02);
        }

        .send-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 18px;
        }

        .send-btn:hover:not(:disabled) {
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 8px 25px rgba(100, 181, 246, 0.5);
        }

        .status-indicator {
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 500;
            margin-top: 10px;
            animation: fadeInUp 0.3s ease;
        }

        .status-success {
            background: rgba(129, 199, 132, 0.2);
            color: #81c784;
            border: 1px solid rgba(129, 199, 132, 0.3);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }

            .chat-panel {
                width: 100%;
                transform: translateX(100%);
            }

            .main-content.chat-open {
                margin-right: 0;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 10px 15px;
            }

            .logo h1 {
                font-size: 1.5rem;
            }

            .side-panel {
                width: 100%;
            }

            .main-content {
                padding: 15px;
                margin-top: 70px;
            }

            .charts-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .chart-card {
                padding: 20px;
            }

            /* Remove frame from About button and bring elements closer */
            .header-controls button {
                background: transparent !important;
                border: none !important;
                padding: 4px 8px !important;
                margin-right: 8px !important;
            }

            .header-controls {
                gap: 8px;
                display: flex;
                align-items: center;
            }

            /* Ensure burger menu is visible on mobile */
            .burger-menu {
                display: flex !important;
                padding: 8px;
                margin-left: 5px;
            }

            .burger-line {
                background: #64b5f6 !important;
                width: 22px;
                height: 2.5px;
            }
        }

        /* Loading Animation */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 50px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(100, 181, 246, 0.2);
            border-left: 4px solid #64b5f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Dashboard Grid Styles */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .dashboard-card {
            background: rgba(40, 40, 70, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            animation: fadeInUp 0.6s ease-out;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(100, 181, 246, 0.3);
        }

        .dashboard-card.full-width {
            grid-column: 1 / -1;
        }

        .dashboard-card h4 {
            color: #64b5f6;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* Skills Intelligence Styles */
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
        }

        .skill-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .skill-item.high-demand {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.4);
        }

        .skill-item.medium-demand {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid rgba(255, 193, 7, 0.4);
        }

        .skill-item.low-demand {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.4);
        }

        .skill-name {
            font-weight: 500;
        }

        .skill-demand {
            font-weight: 600;
            font-size: 0.85rem;
        }

        .emerging-tech-list, .learning-paths, .certification-list {
            space-y: 10px;
        }

        .tech-trend, .path-item, .cert-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: rgba(60, 60, 90, 0.5);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .growth-indicator {
            color: #4caf50;
            font-weight: 600;
        }

        .path-title {
            font-weight: 600;
            color: #e0e0e0;
            margin-bottom: 4px;
        }

        .path-skills {
            font-size: 0.85rem;
            color: #b0b0b0;
        }

        .path-salary, .cert-roi {
            color: #4caf50;
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Career Progression Styles */
        .progression-pipeline {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
            padding: 20px;
        }

        .pipeline-stage {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .stage-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #64b5f6 0%, #81c784 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .stage-info {
            font-size: 0.85rem;
        }

        .stage-count {
            font-weight: 600;
            color: #64b5f6;
        }

        .stage-salary {
            color: #4caf50;
        }

        .pipeline-arrow {
            font-size: 1.5rem;
            color: #64b5f6;
            font-weight: bold;
        }

        .promotion-timeline, .growth-chart {
            space-y: 10px;
        }

        .timeline-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: rgba(60, 60, 90, 0.5);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .transition {
            font-weight: 500;
        }

        .duration {
            color: #64b5f6;
            font-weight: 600;
        }

        .growth-line .year {
            padding: 8px;
            background: rgba(60, 60, 90, 0.5);
            border-radius: 8px;
            margin-bottom: 6px;
            text-align: center;
            font-weight: 500;
        }

        /* Market Opportunity Styles */
        .opportunity-list, .arbitrage-list, .growth-companies, .remote-analysis {
            space-y: 10px;
        }

        .opportunity-item, .arbitrage-item, .company-growth, .work-type {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .opportunity-item.high-opportunity {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.4);
        }

        .opportunity-item.medium-opportunity {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid rgba(255, 193, 7, 0.4);
        }

        .opportunity-item.low-opportunity {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.4);
        }

        .arbitrage-item.best {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.4);
        }

        .arbitrage-item.good {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid rgba(255, 193, 7, 0.4);
        }

        .arbitrage-item.fair {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.4);
        }

        .location-name, .city-name, .company-name {
            font-weight: 600;
            color: #e0e0e0;
            margin-bottom: 4px;
        }

        .opportunity-score, .arbitrage-score, .growth-metric {
            font-size: 0.9rem;
            font-weight: 500;
            color: #64b5f6;
        }

        .opportunity-reason, .cost-ratio, .growth-trend {
            font-size: 0.8rem;
            color: #b0b0b0;
        }

        .work-type {
            display: flex;
            justify-content: space-between;
            background: rgba(60, 60, 90, 0.5);
        }

        .type-label {
            font-weight: 500;
        }

        .salary-range {
            color: #4caf50;
            font-weight: 600;
        }

        .premium-note {
            text-align: center;
            margin-top: 10px;
            font-style: italic;
            color: #64b5f6;
        }

        /* Competitive Intelligence Styles */
        .company-select {
            width: 100%;
            padding: 10px;
            background: rgba(60, 60, 90, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #e0e0e0;
            margin-bottom: 15px;
        }

        .company-select:focus {
            outline: none;
            border-color: #64b5f6;
        }

        .benchmark-results {
            space-y: 8px;
        }

        .benchmark-metric {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            background: rgba(60, 60, 90, 0.5);
            border-radius: 6px;
            margin-bottom: 6px;
        }

        .metric-label {
            font-weight: 500;
        }

        .metric-value {
            color: #64b5f6;
            font-weight: 600;
        }

        .velocity-list, .benefits-trends, .culture-metrics {
            space-y: 10px;
        }

        .velocity-item {
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .velocity-item.fast {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.4);
        }

        .velocity-item.medium {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid rgba(255, 193, 7, 0.4);
        }

        .velocity-item.slow {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.4);
        }

        .velocity-score, .hire-rate {
            font-size: 0.85rem;
            font-weight: 500;
        }

        .benefit-trend, .culture-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            background: rgba(60, 60, 90, 0.5);
            border-radius: 6px;
            margin-bottom: 6px;
        }

        .benefit-name, .culture-aspect {
            font-weight: 500;
        }

        .trend-percentage {
            color: #4caf50;
            font-weight: 600;
        }

        .culture-rating {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stars {
            color: #ffc107;
        }

        .rating-text {
            color: #64b5f6;
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Responsive Dashboard Design */
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .progression-pipeline {
                flex-direction: column;
                gap: 20px;
            }

            .pipeline-arrow {
                transform: rotate(90deg);
            }

            .stage-circle {
                width: 60px;
                height: 60px;
                font-size: 0.8rem;
            }

            .skills-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Home Page with Passkey Access -->
    <div class="home-page" id="homePage">
        <div class="home-background">
            <div class="gradient-orbs">
                <div class="orb orb-1"></div>
                <div class="orb orb-2"></div>
                <div class="orb orb-3"></div>
            </div>
        </div>

        <div class="home-content">
            <div class="logo-container">
                <div class="logo-main">
                    <h1 class="brand-title" id="brandTitle" onclick="refreshApp()">InsightLabs</h1>
                    <p class="brand-subtitle">powered by NAVADA</p>
                </div>
                <p class="brand-tagline">"Where jobs meet intelligence."</p>
            </div>

            <div class="access-container">
                <div class="access-card">
                    <h3 class="access-title">
                        <i class="fas fa-lock"></i>
                    </h3>
                    <div class="passkey-input-container">
                        <input type="password" id="passkeyInput" class="passkey-field" placeholder="Enter 5-digit code" maxlength="5">
                        <i class="fas fa-key access-key-icon" onclick="checkPasskey()"></i>
                    </div>
                    <div class="access-error" id="errorMessage">
                        <i class="fas fa-exclamation-triangle"></i>
                        Invalid access code. Please try again.
                    </div>
                </div>
            </div>


        </div>

        <!-- Rotate Phone Popup -->
        <div class="rotate-popup" id="rotatePopup">
            <button class="popup-close" onclick="hideRotatePopup()">
                <i class="fas fa-times"></i>
            </button>
            <div class="rotate-icon">
                <i class="fas fa-mobile-alt"></i>
                <i class="fas fa-arrow-right" style="margin-left: 10px; font-size: 1.2rem;"></i>
            </div>
            <div class="rotate-text">
                Turn your phone horizontal for the best experience
            </div>
        </div>
    </div>

    <!-- Main App (Hidden Initially) -->
    <div class="app-container" id="mainApp" style="display: none;">
        <!-- Header -->
        <header class="header" id="header">
            <div class="logo">
                <h1 onclick="refreshApp()" style="cursor: pointer;">InsightLabs</h1>
                <span style="font-size: 0.8rem; color: #b0b0b0; margin-left: 10px;">AI Jobs Intelligence</span>
            </div>
            <div class="header-controls">
                <button onclick="showAboutModal()" style="background: rgba(100, 181, 246, 0.2); border: 1px solid rgba(100, 181, 246, 0.5); color: #64b5f6; padding: 8px 16px; border-radius: 20px; font-size: 0.9rem; cursor: pointer; transition: all 0.3s ease; margin-right: 15px;">
                    <i class="fas fa-info-circle"></i> About
                </button>
                <div class="live-indicator">🔴 LIVE</div>
                <div class="burger-menu" onclick="toggleSidePanel()">
                    <div class="burger-line"></div>
                    <div class="burger-line"></div>
                    <div class="burger-line"></div>
                </div>
            </div>
        </header>

        <!-- Side Panel -->
        <div class="side-panel" id="sidePanel">
            <div class="side-panel-header">
                <h2 class="side-panel-title">InsightLab Tools</h2>
                <button class="side-panel-close" onclick="toggleSidePanel()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="side-panel-nav">
                <button class="nav-item active" onclick="showPanel('jobs', event)">
                    <i class="fas fa-briefcase"></i>
                    <span>Live UK AI Jobs</span>
                </button>
                <button class="nav-item" onclick="showPanel('chat', event)">
                    <i class="fas fa-robot"></i>
                    <span>AI Assistant</span>
                </button>
            </div>

            <div class="side-panel-content">
                <!-- Job Listings Panel -->
                <div class="panel-section active" id="jobsPanel">
                    <div style="padding: 20px;">
                        <h3 style="color: #64b5f6; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-briefcase"></i>
                            Live UK AI Job Listings
                        </h3>

                        <!-- Job Filters -->
                        <div class="job-filters">
                            <div class="filter-group">
                                <label for="companyFilter">Company:</label>
                                <select id="companyFilter" class="filter-select">
                                    <option value="">All Companies</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="locationFilter">Location:</label>
                                <select id="locationFilter" class="filter-select">
                                    <option value="">All Locations</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="experienceFilter">Experience:</label>
                                <select id="experienceFilter" class="filter-select">
                                    <option value="">All Levels</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="salaryFilter">Salary Range:</label>
                                <select id="salaryFilter" class="filter-select">
                                    <option value="">All Salaries</option>
                                    <option value="30000-50000">£30k - £50k</option>
                                    <option value="50000-70000">£50k - £70k</option>
                                    <option value="70000-90000">£70k - £90k</option>
                                    <option value="90000-120000">£90k - £120k</option>
                                    <option value="120000+">£120k+</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <input type="text" id="searchInput" placeholder="Search jobs..." class="search-input">
                            </div>
                        </div>

                        <!-- Job Results Info -->
                        <div class="job-results-info">
                            <span id="jobCount">Loading jobs...</span>
                            <button id="refreshJobs" class="refresh-btn">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>

                        <!-- Job Listings Container -->
                        <div class="job-listings-container" id="jobListings">
                            <div class="loading-jobs">
                                <i class="fas fa-spinner fa-spin"></i>
                                Loading job listings...
                            </div>
                        </div>

                        <!-- Pagination -->
                        <div class="pagination" id="pagination" style="display: none;">
                            <button id="prevPage" class="page-btn">Previous</button>
                            <span id="pageInfo">Page 1 of 1</span>
                            <button id="nextPage" class="page-btn">Next</button>
                        </div>
                    </div>
                </div>

                <!-- Chat Panel -->
                <div class="panel-section" id="chatPanel">
                    <div class="assistant-container">
                        <div class="assistant-header">
                            <div class="assistant-avatar">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="assistant-info">
                                <h3>Leslie</h3>
                                <p>Your AI Job Market Assistant</p>
                            </div>
                            <div class="assistant-status">
                                <span class="status-dot"></span>
                                <span>Online</span>
                            </div>
                        </div>

                        <div class="chat-messages-container" id="chatMessages">
                            <div class="welcome-message">
                                <div class="assistant-avatar-small">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div class="message-bubble assistant-bubble">
                                    <div class="message-header">
                                        <span class="sender-name">Leslie</span>
                                        <span class="message-time">Just now</span>
                                    </div>
                                    <div class="message-text">
                                        👋 Hello! I'm Leslie, your AI assistant for UK AI job market insights. I can help you:
                                        <br><br>
                                        <div class="feature-list">
                                            <div class="feature-item">💰 Analyze salary trends and benchmarks</div>
                                            <div class="feature-item">🏢 Compare companies and their offerings</div>
                                            <div class="feature-item">🛠️ Understand skill requirements and demand</div>
                                            <div class="feature-item">📈 Provide career guidance and market insights</div>
                                        </div>
                                        <br>
                                        What would you like to know about the UK AI job market?
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="api-setup-section" id="apiKeyContainer">
                            <div class="api-setup-card">
                                <div class="api-setup-header">
                                    <i class="fas fa-key"></i>
                                    <h4>API Configuration</h4>
                                </div>
                                <p class="api-setup-description">
                                    Enter your OpenAI API key to enable intelligent conversations with Leslie
                                </p>
                                <div class="api-input-group">
                                    <input type="password" id="apiKeyInput" placeholder="sk-proj-..." class="api-input-field">
                                    <button onclick="saveApiKey()" class="api-save-button">
                                        <i class="fas fa-save"></i>
                                        Save Key
                                    </button>
                                </div>
                                <div class="api-help-text">
                                    <i class="fas fa-info-circle"></i>
                                    Get your API key from <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI Platform</a>
                                </div>
                            </div>
                        </div>

                        <div class="chat-input-area">
                            <div class="input-wrapper">
                                <input type="text" id="chatInput" placeholder="Ask Leslie about UK AI jobs..." class="chat-input-field" disabled>
                                <button onclick="sendMessage()" class="send-message-button" disabled>
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>


        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Live Data Status Dashboards -->
            <div class="status-dashboard-container">
                <div class="status-card">
                    <div class="status-header">
                        <i class="fas fa-sync-alt"></i>
                        <h3>Last Data Feed Time</h3>
                    </div>
                    <div class="status-time" id="lastFeedTime">Loading...</div>
                    <div class="status-subtitle" id="feedTimeAgo">Calculating...</div>
                </div>

                <div class="status-card">
                    <div class="status-header">
                        <i class="fas fa-briefcase"></i>
                        <h3>Live Jobs Count</h3>
                    </div>
                    <div class="status-numbers">
                        <div class="status-number-item">
                            <span class="status-label">Current</span>
                            <span class="status-value current" id="currentJobs">184</span>
                        </div>
                        <div class="status-number-item">
                            <span class="status-label">Previous</span>
                            <span class="status-value previous" id="previousJobs">185</span>
                        </div>
                        <div class="status-change" id="jobsChange">
                            <i class="fas fa-arrow-down"></i>
                            <span>-1</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-card" style="animation-delay: 0.1s">
                    <h3 class="chart-title">
                        <i class="fas fa-building"></i>
                        Top UK Companies Hiring
                    </h3>
                    <img src="1_companies_hiring.png" alt="Companies Hiring" class="chart-image">
                </div>

                <div class="chart-card" style="animation-delay: 0.2s">
                    <h3 class="chart-title">
                        <i class="fas fa-map-pin"></i>
                        UK Locations for AI Jobs
                    </h3>
                    <img src="2_location_distribution.png" alt="Location Distribution" class="chart-image">
                </div>

                <div class="chart-card" style="animation-delay: 0.3s">
                    <h3 class="chart-title">
                        <i class="fas fa-wallet"></i>
                        Salary by Experience Level
                    </h3>
                    <img src="3_salary_by_experience.png" alt="Salary by Experience" class="chart-image">
                </div>

                <div class="chart-card" style="animation-delay: 0.4s">
                    <h3 class="chart-title">
                        <i class="fas fa-graduation-cap"></i>
                        Most In-Demand Skills
                    </h3>
                    <img src="5_required_skills.png" alt="Required Skills" class="chart-image">
                </div>

                <div class="chart-card" style="animation-delay: 0.5s">
                    <h3 class="chart-title">
                        <i class="fas fa-home"></i>
                        Work Arrangements
                    </h3>
                    <img src="6_work_type.png" alt="Work Type Distribution" class="chart-image">
                </div>

                <div class="chart-card" style="animation-delay: 0.6s">
                    <h3 class="chart-title">
                        <i class="fas fa-money-bill-wave"></i>
                        Salary by Location
                    </h3>
                    <img src="7_salary_by_location.png" alt="Salary by Location" class="chart-image">
                </div>

                <div class="chart-card" style="animation-delay: 0.7s">
                    <h3 class="chart-title">
                        <i class="fas fa-calendar-days"></i>
                        Job Posting Timeline
                    </h3>
                    <img src="8_posting_timeline.png" alt="Posting Timeline" class="chart-image">
                </div>

                <div class="chart-card" style="animation-delay: 0.8s">
                    <h3 class="chart-title">
                        <i class="fas fa-layer-group"></i>
                        Job Categories
                    </h3>
                    <img src="10_job_categories.png" alt="Job Categories" class="chart-image">
                </div>

                <!-- Enhanced Analytics Section -->
                <div class="chart-card enhanced-chart" style="animation-delay: 0.9s">
                    <h3 class="chart-title">
                        <i class="fas fa-chart-column"></i>
                        Salary Distribution Histogram
                    </h3>
                    <img src="enhanced_1_salary_histogram.png" alt="Salary Histogram" class="chart-image">
                </div>

                <div class="chart-card enhanced-chart" style="animation-delay: 1.0s">
                    <h3 class="chart-title">
                        <i class="fas fa-trophy"></i>
                        Top Companies Leaderboard
                    </h3>
                    <img src="enhanced_2_top_companies_leaderboard.png" alt="Top Companies Leaderboard" class="chart-image">
                </div>

                <div class="chart-card enhanced-chart" style="animation-delay: 1.1s">
                    <h3 class="chart-title">
                        <i class="fas fa-earth-europe"></i>
                        Geographic Distribution
                    </h3>
                    <img src="enhanced_3_geographic_distribution.png" alt="Geographic Distribution" class="chart-image">
                </div>

                <div class="chart-card enhanced-chart" style="animation-delay: 1.2s">
                    <h3 class="chart-title">
                        <i class="fas fa-arrow-trend-up"></i>
                        12-Month Historical Trends
                    </h3>
                    <img src="enhanced_4_historical_trends.png" alt="Historical Trends" class="chart-image">
                </div>

                <!-- Company Sentiment Analysis Section -->
                <div class="chart-card sentiment-chart" style="animation-delay: 1.3s">
                    <h3 class="chart-title">
                        <i class="fas fa-smile"></i>
                        Company Sentiment Ranking
                    </h3>
                    <img src="sentiment_1_company_ranking.png" alt="Company Sentiment Ranking" class="chart-image">
                </div>

                <div class="chart-card sentiment-chart" style="animation-delay: 1.4s">
                    <h3 class="chart-title">
                        <i class="fas fa-pound-sign"></i>
                        Sentiment vs Salary Analysis
                    </h3>
                    <img src="sentiment_2_salary_correlation.png" alt="Sentiment vs Salary" class="chart-image">
                </div>

                <div class="chart-card sentiment-chart" style="animation-delay: 1.5s">
                    <h3 class="chart-title">
                        <i class="fas fa-users"></i>
                        Company Engagement Scores
                    </h3>
                    <img src="sentiment_3_engagement_scores.png" alt="Engagement Scores" class="chart-image">
                </div>

                <div class="chart-card sentiment-chart" style="animation-delay: 1.6s">
                    <h3 class="chart-title">
                        <i class="fas fa-chart-pie"></i>
                        Sentiment Distribution Analysis
                    </h3>
                    <img src="sentiment_4_distributions.png" alt="Sentiment Distribution" class="chart-image">
                </div>

            </div>

            <!-- Skills Intelligence Dashboard Section -->
            <section class="dashboard-section">
                <h2 class="section-title">
                    <i class="fas fa-brain"></i>
                    Skills Intelligence Dashboard
                </h2>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h4><i class="fas fa-fire"></i> Skills Demand Heatmap</h4>
                        <div id="skillsHeatmap" class="chart-container">
                            <div class="skills-grid">
                                <div class="skill-item high-demand">
                                    <span class="skill-name">Python</span>
                                    <span class="skill-demand">85%</span>
                                </div>
                                <div class="skill-item high-demand">
                                    <span class="skill-name">Machine Learning</span>
                                    <span class="skill-demand">78%</span>
                                </div>
                                <div class="skill-item medium-demand">
                                    <span class="skill-name">AWS</span>
                                    <span class="skill-demand">65%</span>
                                </div>
                                <div class="skill-item medium-demand">
                                    <span class="skill-name">TensorFlow</span>
                                    <span class="skill-demand">58%</span>
                                </div>
                                <div class="skill-item medium-demand">
                                    <span class="skill-name">PyTorch</span>
                                    <span class="skill-demand">52%</span>
                                </div>
                                <div class="skill-item low-demand">
                                    <span class="skill-name">Docker</span>
                                    <span class="skill-demand">35%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <h4><i class="fas fa-rocket"></i> Emerging Technologies</h4>
                        <div class="emerging-tech-list">
                            <div class="tech-trend">
                                <span class="tech-name">Large Language Models</span>
                                <span class="growth-indicator">↑ 340%</span>
                            </div>
                            <div class="tech-trend">
                                <span class="tech-name">Vector Databases</span>
                                <span class="growth-indicator">↑ 185%</span>
                            </div>
                            <div class="tech-trend">
                                <span class="tech-name">MLOps</span>
                                <span class="growth-indicator">↑ 120%</span>
                            </div>
                            <div class="tech-trend">
                                <span class="tech-name">Edge AI</span>
                                <span class="growth-indicator">↑ 95%</span>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <h4><i class="fas fa-graduation-cap"></i> Learning Path Recommendations</h4>
                        <div class="learning-paths">
                            <div class="path-item">
                                <div class="path-title">Data Scientist → ML Engineer</div>
                                <div class="path-skills">Python → MLOps → Kubernetes → Cloud</div>
                                <div class="path-salary">+£15K average increase</div>
                            </div>
                            <div class="path-item">
                                <div class="path-title">Software Dev → AI Engineer</div>
                                <div class="path-skills">ML → TensorFlow → Deep Learning</div>
                                <div class="path-salary">+£22K average increase</div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <h4><i class="fas fa-certificate"></i> Certification ROI</h4>
                        <div class="certification-list">
                            <div class="cert-item">
                                <span class="cert-name">AWS ML Specialty</span>
                                <span class="cert-roi">+£8K avg</span>
                            </div>
                            <div class="cert-item">
                                <span class="cert-name">Google ML Engineer</span>
                                <span class="cert-roi">+£6K avg</span>
                            </div>
                            <div class="cert-item">
                                <span class="cert-name">Azure AI Engineer</span>
                                <span class="cert-roi">+£7K avg</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Career Progression Analytics Dashboard Section -->
            <section class="dashboard-section">
                <h2 class="section-title">
                    <i class="fas fa-chart-line"></i>
                    Career Progression Analytics
                </h2>
                <div class="dashboard-grid">
                    <div class="dashboard-card full-width">
                        <h4><i class="fas fa-route"></i> Experience Level Pipeline</h4>
                        <div class="progression-pipeline">
                            <div class="pipeline-stage">
                                <div class="stage-circle">Entry</div>
                                <div class="stage-info">
                                    <div class="stage-count">5 jobs</div>
                                    <div class="stage-salary">£32K avg</div>
                                </div>
                            </div>
                            <div class="pipeline-arrow">→</div>
                            <div class="pipeline-stage">
                                <div class="stage-circle">Mid</div>
                                <div class="stage-info">
                                    <div class="stage-count">77 jobs</div>
                                    <div class="stage-salary">£49K avg</div>
                                </div>
                            </div>
                            <div class="pipeline-arrow">→</div>
                            <div class="pipeline-stage">
                                <div class="stage-circle">Senior</div>
                                <div class="stage-info">
                                    <div class="stage-count">12 jobs</div>
                                    <div class="stage-salary">£65K avg</div>
                                </div>
                            </div>
                            <div class="pipeline-arrow">→</div>
                            <div class="pipeline-stage">
                                <div class="stage-circle">Lead</div>
                                <div class="stage-info">
                                    <div class="stage-count">74 jobs</div>
                                    <div class="stage-salary">£47K avg</div>
                                </div>
                            </div>
                            <div class="pipeline-arrow">→</div>
                            <div class="pipeline-stage">
                                <div class="stage-circle">Principal</div>
                                <div class="stage-info">
                                    <div class="stage-count">17 jobs</div>
                                    <div class="stage-salary">£62K avg</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <h4><i class="fas fa-clock"></i> Time-to-Promotion</h4>
                        <div class="promotion-timeline">
                            <div class="timeline-item">
                                <span class="transition">Entry → Mid</span>
                                <span class="duration">18 months</span>
                            </div>
                            <div class="timeline-item">
                                <span class="transition">Mid → Senior</span>
                                <span class="duration">2.5 years</span>
                            </div>
                            <div class="timeline-item">
                                <span class="transition">Senior → Lead</span>
                                <span class="duration">3+ years</span>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <h4><i class="fas fa-trending-up"></i> Salary Growth Trajectories</h4>
                        <div class="growth-chart">
                            <div class="growth-line">
                                <div class="year">Year 1: £35K</div>
                                <div class="year">Year 3: £50K</div>
                                <div class="year">Year 6: £70K</div>
                                <div class="year">Year 10: £95K</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Market Opportunity Finder Dashboard Section -->
            <section class="dashboard-section">
                <h2 class="section-title">
                    <i class="fas fa-target"></i>
                    Market Opportunity Finder
                </h2>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h4><i class="fas fa-map-marked-alt"></i> Underserved Markets</h4>
                        <div class="opportunity-list">
                            <div class="opportunity-item high-opportunity">
                                <div class="location-name">Bristol</div>
                                <div class="opportunity-score">High Opportunity</div>
                                <div class="opportunity-reason">5 jobs, growing demand</div>
                            </div>
                            <div class="opportunity-item medium-opportunity">
                                <div class="location-name">Cardiff</div>
                                <div class="opportunity-score">Medium Opportunity</div>
                                <div class="opportunity-reason">6 jobs, stable market</div>
                            </div>
                            <div class="opportunity-item low-opportunity">
                                <div class="location-name">Leeds</div>
                                <div class="opportunity-score">Emerging Market</div>
                                <div class="opportunity-reason">4 jobs, early stage</div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <h4><i class="fas fa-balance-scale"></i> Salary Arbitrage Map</h4>
                        <div class="arbitrage-list">
                            <div class="arbitrage-item best">
                                <div class="city-name">Manchester</div>
                                <div class="arbitrage-score">Best Value</div>
                                <div class="cost-ratio">Salary: £45K | CoL: 0.75x London</div>
                            </div>
                            <div class="arbitrage-item good">
                                <div class="city-name">Edinburgh</div>
                                <div class="arbitrage-score">Good Value</div>
                                <div class="cost-ratio">Salary: £48K | CoL: 0.85x London</div>
                            </div>
                            <div class="arbitrage-item fair">
                                <div class="city-name">London</div>
                                <div class="arbitrage-score">Premium Market</div>
                                <div class="cost-ratio">Salary: £55K | CoL: 1.0x</div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <h4><i class="fas fa-chart-bar"></i> Company Growth Indicators</h4>
                        <div class="growth-companies">
                            <div class="company-growth">
                                <div class="company-name">poolside</div>
                                <div class="growth-metric">13 jobs - Rapid Hiring</div>
                                <div class="growth-trend">↗️ +65% this month</div>
                            </div>
                            <div class="company-growth">
                                <div class="company-name">CBRE</div>
                                <div class="growth-metric">10 jobs - Steady Growth</div>
                                <div class="growth-trend">↗️ +25% this month</div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <h4><i class="fas fa-home"></i> Remote Work Premium</h4>
                        <div class="remote-analysis">
                            <div class="work-type">
                                <span class="type-label">Hybrid (183 jobs)</span>
                                <span class="salary-range">£49K avg</span>
                            </div>
                            <div class="work-type">
                                <span class="type-label">Remote (2 jobs)</span>
                                <span class="salary-range">£55K avg</span>
                            </div>
                            <div class="premium-note">Remote premium: +12% average</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Competitive Intelligence Hub Dashboard Section -->
            <section class="dashboard-section">
                <h2 class="section-title">
                    <i class="fas fa-trophy"></i>
                    Competitive Intelligence Hub
                </h2>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h4><i class="fas fa-search"></i> Company Benchmarking</h4>
                        <div class="company-comparison">
                            <select id="companySelector" class="company-select">
                                <option>Select a company...</option>
                                <option>poolside</option>
                                <option>CBRE</option>
                                <option>NHS Scotland</option>
                                <option>JPMorganChase</option>
                            </select>
                            <div class="benchmark-results" id="benchmarkResults">
                                <div class="benchmark-metric">
                                    <span class="metric-label">Jobs Posted</span>
                                    <span class="metric-value">13</span>
                                </div>
                                <div class="benchmark-metric">
                                    <span class="metric-label">Avg Salary</span>
                                    <span class="metric-value">£52K</span>
                                </div>
                                <div class="benchmark-metric">
                                    <span class="metric-label">Market Position</span>
                                    <span class="metric-value">Top Employer</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <h4><i class="fas fa-tachometer-alt"></i> Hiring Velocity Tracker</h4>
                        <div class="velocity-list">
                            <div class="velocity-item fast">
                                <div class="company-name">poolside</div>
                                <div class="velocity-score">Fast Hiring</div>
                                <div class="hire-rate">2.3 jobs/week</div>
                            </div>
                            <div class="velocity-item medium">
                                <div class="company-name">CBRE</div>
                                <div class="velocity-score">Steady Hiring</div>
                                <div class="hire-rate">1.7 jobs/week</div>
                            </div>
                            <div class="velocity-item slow">
                                <div class="company-name">NHS Scotland</div>
                                <div class="velocity-score">Slow Hiring</div>
                                <div class="hire-rate">1.0 jobs/week</div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <h4><i class="fas fa-gift"></i> Benefits Analysis</h4>
                        <div class="benefits-trends">
                            <div class="benefit-trend">
                                <span class="benefit-name">Hybrid Work</span>
                                <span class="trend-percentage">99% of companies</span>
                            </div>
                            <div class="benefit-trend">
                                <span class="benefit-name">Learning Budget</span>
                                <span class="trend-percentage">78% of companies</span>
                            </div>
                            <div class="benefit-trend">
                                <span class="benefit-name">Stock Options</span>
                                <span class="trend-percentage">45% of companies</span>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <h4><i class="fas fa-heart"></i> Company Culture Metrics</h4>
                        <div class="culture-metrics">
                            <div class="culture-item">
                                <div class="culture-aspect">Work-Life Balance</div>
                                <div class="culture-rating">
                                    <span class="stars">★★★★☆</span>
                                    <span class="rating-text">4.2/5</span>
                                </div>
                            </div>
                            <div class="culture-item">
                                <div class="culture-aspect">Growth Opportunities</div>
                                <div class="culture-rating">
                                    <span class="stars">★★★★★</span>
                                    <span class="rating-text">4.6/5</span>
                                </div>
                            </div>
                            <div class="culture-item">
                                <div class="culture-aspect">Tech Stack Modernity</div>
                                <div class="culture-rating">
                                    <span class="stars">★★★★☆</span>
                                    <span class="rating-text">4.1/5</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- About Modal -->
        <div class="chart-modal" id="aboutModal" style="z-index: 10001;">
            <div class="chart-modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto; padding: 0;">
                <button class="chart-close" id="aboutClose" style="position: absolute; top: 15px; right: 15px; z-index: 10002;">
                    <i class="fas fa-times"></i>
                </button>
                <div class="about-container" style="padding: 30px;">
                    <div class="about-header" style="display: flex; align-items: center; padding: 20px; background: rgba(100, 181, 246, 0.1); border-bottom: 1px solid rgba(255, 255, 255, 0.1); margin: -30px -30px 20px -30px; border-radius: 10px 10px 0 0;">
                        <div class="about-info">
                            <h3 style="margin: 0; font-size: 1.8rem; color: #64b5f6;">InsightLabs powered by <span style="font-size: 0.9rem; color: white;">NAVADA</span></h3>
                            <p style="margin: 5px 0 0 0; color: #b0b0b0; font-size: 1.1rem;">Real-time UK AI job market insights platform</p>
                        </div>
                    </div>

                    <div class="about-content">
                        <div class="about-section" style="margin-bottom: 25px;">
                            <h4 style="color: #64b5f6; font-size: 1.3rem; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-lightbulb"></i> What is InsightLab?
                            </h4>
                            <p style="color: #e0e0e0; line-height: 1.6; font-size: 1rem; margin-bottom: 15px;">InsightLab is a <strong>data-driven AI jobs intelligence platform</strong> powered by NAVADA technology. We analyze <strong>185+ live UK AI positions</strong> in real-time, processing job market data to deliver actionable insights for strategic career decisions.</p>
                            <p style="color: #81c784; font-size: 1.1rem; font-weight: 600; font-style: italic; text-align: center; margin: 20px 0; padding: 15px; background: rgba(129, 199, 132, 0.1); border-radius: 10px; border-left: 4px solid #81c784;">"Where jobs meet intelligence."</p>
                            <p style="color: #e0e0e0; line-height: 1.6; font-size: 1rem;">Every insight is <strong>backed by real data</strong> - from salary trends to skills demand, ensuring your career moves are informed by current market realities.</p>
                        </div>

                        <div class="about-section" style="margin-bottom: 25px;">
                            <h4 style="color: #64b5f6; font-size: 1.3rem; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-cogs"></i> How it Works
                            </h4>
                            <p style="color: #e0e0e0; line-height: 1.6; font-size: 1rem;"><strong>Real-time data pipeline:</strong> Adzuna API → Advanced analytics → 16 interactive visualizations. Our AI assistant processes live job data to provide <strong>evidence-based career guidance</strong>, while sentiment analysis algorithms quantify company culture from job descriptions.</p>
                        </div>

                        <div class="about-section" style="margin-bottom: 25px;">
                            <h4 style="color: #64b5f6; font-size: 1.3rem; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-target"></i> Why InsightLab?
                            </h4>
                            <p style="color: #e0e0e0; line-height: 1.6; font-size: 1rem; margin-bottom: 15px;"><strong>Data-driven decision making</strong> for the AI job market:</p>
                            <ul style="color: #e0e0e0; line-height: 1.6; font-size: 1rem; margin-left: 20px;">
                                <li style="margin-bottom: 8px;"><strong>Live salary data</strong> from 185+ positions (£21K-£110K range)</li>
                                <li style="margin-bottom: 8px;"><strong>Quantified company sentiment</strong> scores for culture assessment</li>
                                <li style="margin-bottom: 8px;"><strong>Skills demand metrics</strong> across tech stacks and experience levels</li>
                                <li style="margin-bottom: 8px;"><strong>Geographic salary mapping</strong> with regional breakdowns</li>
                                <li style="margin-bottom: 8px;"><strong>AI-powered insights</strong> from real job market patterns</li>
                            </ul>
                        </div>

                        <div class="about-section" style="margin-bottom: 25px;">
                            <h4 style="color: #64b5f6; font-size: 1.3rem; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-user-tie"></i> About the Creator
                            </h4>
                            <p style="color: #e0e0e0; line-height: 1.6; font-size: 1rem;">Designed and developed by <strong>Lee Akpareva MBA, MA</strong>, a business intelligence professional with expertise in data analytics, AI implementation, and strategic business solutions. Lee combines academic excellence with practical industry experience to create innovative platforms that solve real-world business challenges.</p>
                        </div>

                        <div class="about-section">
                            <h4 style="color: #64b5f6; font-size: 1.3rem; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-chart-line"></i> Technical Features
                            </h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div style="background: rgba(100, 181, 246, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(100, 181, 246, 0.3);">
                                    <div style="color: #64b5f6; font-weight: bold; margin-bottom: 5px;">16 Analytics Charts</div>
                                    <div style="color: #b0b0b0; font-size: 0.9rem;">Interactive data visualizations</div>
                                </div>
                                <div style="background: rgba(129, 199, 132, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(129, 199, 132, 0.3);">
                                    <div style="color: #81c784; font-weight: bold; margin-bottom: 5px;">Real-time API</div>
                                    <div style="color: #b0b0b0; font-size: 0.9rem;">Live Adzuna job data</div>
                                </div>
                                <div style="background: rgba(255, 183, 77, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(255, 183, 77, 0.3);">
                                    <div style="color: #ffb74d; font-weight: bold; margin-bottom: 5px;">AI Assistant</div>
                                    <div style="color: #b0b0b0; font-size: 0.9rem;">OpenAI GPT integration</div>
                                </div>
                                <div style="background: rgba(240, 98, 146, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(240, 98, 146, 0.3);">
                                    <div style="color: #f06292; font-weight: bold; margin-bottom: 5px;">Sentiment Analysis</div>
                                    <div style="color: #b0b0b0; font-size: 0.9rem;">Company culture insights</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chart Zoom Modal -->
        <div class="chart-modal" id="chartModal">
            <div class="chart-modal-content">
                <button class="chart-close" id="chartClose">
                    <i class="fas fa-times"></i>
                </button>
                <img id="chartModalImage" src="" alt="Chart" class="chart-modal-image">
            </div>
        </div>

        <!-- Job Detail Modal -->
        <div class="job-detail-modal" id="jobDetailModal">
            <div class="job-detail-content">
                <button class="job-detail-close" id="jobDetailClose">
                    <i class="fas fa-times"></i>
                </button>
                <div id="jobDetailContent">
                    <!-- Job details will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer style="background: rgba(30, 30, 60, 0.95); padding: 20px 0; text-align: center; color: #e0e0e0; border-top: 1px solid rgba(255, 255, 255, 0.1); margin-top: 50px;">
            <div style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
                <p style="margin: 0; font-size: 14px; opacity: 0.8;">
                    Designed & Developed by <strong>Lee Akpareva MBA, MA</strong>
                </p>
                <p style="margin: 5px 0 0 0; font-size: 12px; opacity: 0.6;">
                    InsightLabs powered by NAVADA - AI Jobs Intelligence Platform © 2025
                </p>
            </div>
        </footer>

    </div>

    <script>
        let apiKey = localStorage.getItem('openai_api_key');
        let messageId = 0;
        let sidePanelOpen = false;
        let currentPanel = 'jobs';

        // Passkey access system
        function checkPasskey() {
            const passkey = document.getElementById('passkeyInput').value;
            const homePage = document.getElementById('homePage');
            const mainApp = document.getElementById('mainApp');
            const errorMsg = document.getElementById('errorMessage');

            if (passkey === '54321') {
                // Successful access - transition to main app
                homePage.style.opacity = '0';
                homePage.style.transform = 'scale(0.95)';

                setTimeout(() => {
                    homePage.style.display = 'none';
                    mainApp.style.display = 'block';
                    mainApp.style.opacity = '0';

                    // Fade in main app
                    setTimeout(() => {
                        mainApp.style.opacity = '1';
                    }, 50);
                }, 500);

                // Store access for session
                sessionStorage.setItem('insightlab_access', 'granted');
            } else {
                // Show error message
                errorMsg.style.display = 'block';
                errorMsg.style.opacity = '1';
                document.getElementById('passkeyInput').style.borderColor = '#ff6b6b';

                // Clear error after 3 seconds
                setTimeout(() => {
                    errorMsg.style.opacity = '0';
                    setTimeout(() => {
                        errorMsg.style.display = 'none';
                        document.getElementById('passkeyInput').style.borderColor = 'rgba(255, 255, 255, 0.2)';
                    }, 300);
                }, 3000);

                // Clear input
                document.getElementById('passkeyInput').value = '';
            }
        }

        // Handle Enter key on passkey input
        document.addEventListener('DOMContentLoaded', function() {
            const passkeyInput = document.getElementById('passkeyInput');
            if (passkeyInput) {
                passkeyInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        checkPasskey();
                    }
                });
            }

            // Check if user already has access this session
            if (sessionStorage.getItem('insightlab_access') === 'granted') {
                document.getElementById('homePage').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
            }

            // Show rotate phone popup after 3 seconds on mobile portrait
            function showRotatePopupIfNeeded() {
                const rotatePopup = document.getElementById('rotatePopup');
                const homePage = document.getElementById('homePage');

                // Only show if on mobile portrait and on home page
                if (window.innerWidth <= 768 && window.innerHeight > window.innerWidth &&
                    homePage && homePage.style.display !== 'none') {

                    setTimeout(() => {
                        if (rotatePopup && homePage.style.display !== 'none') {
                            rotatePopup.classList.add('show');

                            // Auto-hide after 4 seconds
                            setTimeout(() => {
                                rotatePopup.classList.remove('show');
                            }, 4000);
                        }
                    }, 3000);
                }
            }

            showRotatePopupIfNeeded();

            // Re-check on orientation change
            window.addEventListener('orientationchange', function() {
                setTimeout(showRotatePopupIfNeeded, 100);
            });
        });

        // Hide rotate popup function
        function hideRotatePopup() {
            const rotatePopup = document.getElementById('rotatePopup');
            if (rotatePopup) {
                rotatePopup.classList.remove('show');
            }
        }

        // Refresh app function
        function refreshApp() {
            window.location.reload();
        }

        // Update Live Data Status Dashboards
        async function updateStatusDashboards() {
            try {
                // Fetch the CSV data
                const response = await fetch('live_uk_ai_jobs.csv');
                const csvText = await response.text();

                // Parse CSV properly using the robust parser
                const jobs = parseCSV(csvText);

                // Get current job count
                const currentJobsCount = jobs.length;

                // Get the last fetched timestamp from the first job (they're all the same)
                if (jobs.length > 0 && jobs[0].fetched_at) {
                    updateLastFeedTime(jobs[0].fetched_at);
                }

                // Update job counts
                updateJobCounts(currentJobsCount);

            } catch (error) {
                console.error('Error loading status data:', error);
                document.getElementById('lastFeedTime').textContent = 'Error loading data';
            }
        }

        function updateLastFeedTime(timestamp) {
            try {
                // Parse the timestamp
                const feedTime = new Date(timestamp);

                // Format as digital clock with date: "2025-10-06 | 07:23:14"
                const year = feedTime.getFullYear();
                const month = String(feedTime.getMonth() + 1).padStart(2, '0');
                const day = String(feedTime.getDate()).padStart(2, '0');
                const hours = String(feedTime.getHours()).padStart(2, '0');
                const minutes = String(feedTime.getMinutes()).padStart(2, '0');
                const seconds = String(feedTime.getSeconds()).padStart(2, '0');

                const digitalClock = `${year}-${month}-${day} | ${hours}:${minutes}:${seconds}`;
                document.getElementById('lastFeedTime').textContent = digitalClock;

                // Calculate time ago
                const now = new Date();
                const diffMs = now - feedTime;
                const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
                const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));

                let timeAgo = '';
                if (diffHours > 0) {
                    timeAgo = `${diffHours} hour${diffHours !== 1 ? 's' : ''} `;
                }
                if (diffMinutes > 0 || diffHours === 0) {
                    timeAgo += `${diffMinutes} minute${diffMinutes !== 1 ? 's' : ''} ago`;
                }

                document.getElementById('feedTimeAgo').textContent = timeAgo || 'Just now';

            } catch (error) {
                console.error('Error parsing timestamp:', error);
                document.getElementById('lastFeedTime').textContent = 'Unknown';
                document.getElementById('feedTimeAgo').textContent = '';
            }
        }

        function updateJobCounts(current) {
            // Get previous count from localStorage
            const previous = localStorage.getItem('previousJobCount') || current;

            // Update display
            document.getElementById('currentJobs').textContent = current;
            document.getElementById('previousJobs').textContent = previous;

            // Calculate change
            const change = current - previous;
            const changeElement = document.getElementById('jobsChange');

            if (change > 0) {
                changeElement.className = 'status-change positive';
                changeElement.innerHTML = '<i class="fas fa-arrow-up"></i><span>+' + change + '</span>';
            } else if (change < 0) {
                changeElement.className = 'status-change negative';
                changeElement.innerHTML = '<i class="fas fa-arrow-down"></i><span>' + change + '</span>';
            } else {
                changeElement.className = 'status-change neutral';
                changeElement.innerHTML = '<i class="fas fa-equals"></i><span>No change</span>';
            }

            // Store current as previous for next time
            if (current !== previous) {
                localStorage.setItem('previousJobCount', current);
            }
        }

        // Call updateStatusDashboards when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Check if we're on the main app
            const mainApp = document.getElementById('mainApp');
            if (mainApp && mainApp.style.display !== 'none') {
                updateStatusDashboards();
            }

            // Also update when switching to main app
            const originalCheckPasskey = window.checkPasskey;
            window.checkPasskey = function() {
                const result = originalCheckPasskey.apply(this, arguments);
                const passkey = document.getElementById('passkeyInput').value;
                if (passkey === '54321') {
                    setTimeout(updateStatusDashboards, 600);
                }
                return result;
            };
        });

        // Auto-resize textarea
        const chatInput = document.getElementById('chatInput');
        chatInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        // Header scroll effect
        window.addEventListener('scroll', function() {
            const header = document.getElementById('header');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Toggle side panel
        function toggleSidePanel() {
            const sidePanel = document.getElementById('sidePanel');
            const burgerMenu = document.querySelector('.burger-menu');

            sidePanelOpen = !sidePanelOpen;

            if (sidePanelOpen) {
                sidePanel.classList.add('open');
                burgerMenu.classList.add('active');
            } else {
                sidePanel.classList.remove('open');
                burgerMenu.classList.remove('active');
            }
        }

        // Show specific panel section
        function showPanel(panelName, evt) {
            // Update navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Handle the active state properly
            if (evt && evt.target) {
                evt.target.closest('.nav-item').classList.add('active');
            } else {
                // Fallback if no event passed
                document.querySelector(`.nav-item[onclick*="${panelName}"]`).classList.add('active');
            }

            // Update panel content
            document.querySelectorAll('.panel-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(panelName + 'Panel').classList.add('active');

            currentPanel = panelName;

            // If switching to jobs panel and jobs not loaded yet, load them
            if (panelName === 'jobs' && allJobs.length === 0) {
                loadJobs();
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {

            // Check if API key exists
            if (apiKey) {
                const apiInput = document.querySelector('#chatPanel .api-input');
                if (apiInput) {
                    apiInput.value = '••••••••••••••••••••';
                    enableChat();
                }
            }

            // Auto-load jobs when side panel is available
            loadJobs();
        });

        function saveApiKey() {
            const key = document.querySelector('.api-input-field').value;
            if (key && key !== '••••••••••••••••••••') {
                localStorage.setItem('openai_api_key', key);
                apiKey = key;
                document.querySelector('.api-input-field').value = '••••••••••••••••••••';
                document.getElementById('apiKeyContainer').style.display = 'none';
                enableChat();
            }
        }

        function enableChat() {
            const chatInput = document.querySelector('.chat-input-field');
            const sendButton = document.querySelector('.send-message-button');
            if (chatInput) chatInput.disabled = false;
            if (sendButton) sendButton.disabled = false;
            if (document.getElementById('apiKeyContainer')) {
                document.getElementById('apiKeyContainer').style.display = 'none';
            }
        }

        function askQuestion(question) {
            const input = document.querySelector('.chat-input-field');
            if (input) {
                input.value = question;
                sendMessage();
            }
        }

        async function sendMessage() {
            const input = document.querySelector('.chat-input-field');
            const message = input.value.trim();

            if (!message || !apiKey) return;

            // Add user message
            addMessage(message, 'user');
            input.value = '';
            input.style.height = 'auto';

            // Show typing indicator
            const typingId = addTypingIndicator();

            try {
                const response = await callOpenAI(message);
                removeMessage(typingId);
                addMessage(response, 'ai');
            } catch (error) {
                removeMessage(typingId);
                addMessage(`Sorry, there was an error: ${error.message}`, 'ai');
            }
        }

        // Generate live context from job data
        async function generateLiveContext() {
            try {
                // Load the CSV data
                const response = await fetch('live_uk_ai_jobs.csv');
                const csvText = await response.text();
                const jobs = parseCSV(csvText);

                // Analyze the data
                const analysis = analyzeJobData(jobs);

                // Generate context string
                return `
LIVE DATA ACCESS - CURRENT UK AI JOB MARKET (${analysis.totalJobs} active positions):

REAL-TIME STATISTICS:
- Total Active Jobs: ${analysis.totalJobs}
- Last Updated: ${analysis.lastUpdated}
- Recent Activity: ${analysis.recentJobs} new jobs in last 7 days

TOP HIRING COMPANIES (Live Data):
${analysis.topCompanies.slice(0, 10).map(([company, count]) => `${company} (${count} jobs)`).join(', ')}

GEOGRAPHIC DISTRIBUTION (Current):
${analysis.topLocations.slice(0, 10).map(([location, count]) => `${location} (${count})`).join(', ')}

SALARY ANALYSIS (GBP):
- Average by Level: ${Object.entries(analysis.salaryByLevel).map(([level, salary]) => `${level}: £${Math.round(salary).toLocaleString()}`).join(', ')}
- Overall Average: £${Math.round(analysis.averageSalary).toLocaleString()}
- Salary Range: £${Math.round(analysis.minSalary).toLocaleString()} - £${Math.round(analysis.maxSalary).toLocaleString()}
- Median Salary: £${Math.round(analysis.medianSalary).toLocaleString()}

EXPERIENCE LEVELS:
${Object.entries(analysis.experienceLevels).map(([level, count]) => `${level} (${count})`).join(', ')}

WORK ARRANGEMENTS:
${Object.entries(analysis.workTypes).map(([type, count]) => `${type} (${count})`).join(', ')}

JOB CATEGORIES:
${Object.entries(analysis.categories).map(([category, count]) => `${category} (${count})`).join(', ')}

You have complete access to all ${analysis.totalJobs} job postings and can provide detailed, specific answers about any aspect of the UK AI job market.
                `;
            } catch (error) {
                console.error('Error generating live context:', error);
                return "LIVE DATA ACCESS: Currently using cached analysis of UK AI job market.";
            }
        }

        // Parse CSV data
        function parseCSV(csvText) {
            const lines = csvText.split('\n');
            const headers = lines[0].split(',');
            const jobs = [];

            for (let i = 1; i < lines.length; i++) {
                if (lines[i].trim()) {
                    const values = lines[i].split(',');
                    const job = {};
                    headers.forEach((header, index) => {
                        job[header.trim()] = values[index] ? values[index].replace(/"/g, '').trim() : '';
                    });
                    jobs.push(job);
                }
            }
            return jobs;
        }

        // Analyze job data
        function analyzeJobData(jobs) {
            const totalJobs = jobs.length;

            // Company analysis
            const companyCount = {};
            jobs.forEach(job => {
                const company = job.company || 'Unknown';
                companyCount[company] = (companyCount[company] || 0) + 1;
            });
            const topCompanies = Object.entries(companyCount).sort((a, b) => b[1] - a[1]);

            // Location analysis
            const locationCount = {};
            jobs.forEach(job => {
                const location = job.location || 'Unknown';
                locationCount[location] = (locationCount[location] || 0) + 1;
            });
            const topLocations = Object.entries(locationCount).sort((a, b) => b[1] - a[1]);

            // Salary analysis
            const salaries = jobs.map(job => parseFloat(job.salary_avg)).filter(s => !isNaN(s) && s > 0);
            const averageSalary = salaries.reduce((a, b) => a + b, 0) / salaries.length;
            const minSalary = Math.min(...salaries);
            const maxSalary = Math.max(...salaries);
            const medianSalary = salaries.sort((a, b) => a - b)[Math.floor(salaries.length / 2)];

            // Salary by level
            const salaryByLevel = {};
            const levelGroups = {};
            jobs.forEach(job => {
                const level = job.experience_level || 'Unknown';
                const salary = parseFloat(job.salary_avg);
                if (!isNaN(salary) && salary > 0) {
                    if (!levelGroups[level]) levelGroups[level] = [];
                    levelGroups[level].push(salary);
                }
            });
            Object.entries(levelGroups).forEach(([level, salaries]) => {
                salaryByLevel[level] = salaries.reduce((a, b) => a + b, 0) / salaries.length;
            });

            // Experience levels
            const experienceLevels = {};
            jobs.forEach(job => {
                const level = job.experience_level || 'Unknown';
                experienceLevels[level] = (experienceLevels[level] || 0) + 1;
            });

            // Work types
            const workTypes = {};
            jobs.forEach(job => {
                const type = job.work_type || 'Unknown';
                workTypes[type] = (workTypes[type] || 0) + 1;
            });

            // Categories
            const categories = {};
            jobs.forEach(job => {
                const category = job.category || 'Unknown';
                categories[category] = (categories[category] || 0) + 1;
            });

            return {
                totalJobs,
                topCompanies,
                topLocations,
                averageSalary,
                minSalary,
                maxSalary,
                medianSalary,
                salaryByLevel,
                experienceLevels,
                workTypes,
                categories,
                lastUpdated: jobs.length > 0 ? jobs[0].fetched_at : 'Unknown',
                recentJobs: totalJobs // Assuming all jobs are recent for now
            };
        }

        async function callOpenAI(message) {
            // Generate live context from current job data
            const liveContext = await generateLiveContext();

            const context = `
            You are InsightLab AI Assistant, powered by NAVADA technology - a senior UK AI Job Market analyst with 10+ years of experience.

            ${liveContext}

            ADDITIONAL CAPABILITIES:
            - Answer questions about specific companies, locations, salary ranges
            - Compare job opportunities across different cities and experience levels
            - Provide insights on skill demand and career progression
            - Analyze market trends and growth opportunities
            - Offer personalized career guidance based on current market data

            Always provide specific, data-driven insights from the live job market. When discussing salaries, companies, or locations, reference the actual current data. Be professional but conversational.
            `;

            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${apiKey}`,
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    model: 'gpt-3.5-turbo',
                    messages: [
                        {role: 'system', content: context},
                        {role: 'user', content: message}
                    ],
                    max_tokens: 600,
                    temperature: 0.7
                })
            });

            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.error?.message || 'API request failed');
            }

            const data = await response.json();
            return data.choices[0].message.content;
        }

        function addMessage(text, sender) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageId++;

            messageDiv.className = `message message-${sender}`;
            messageDiv.id = `message-${messageId}`;
            messageDiv.innerHTML = `
                <div class="message-bubble">
                    <div class="message-sender">${sender === 'user' ? '👤 You' : '🤖 InsightLab AI'}</div>
                    <div class="message-content">${formatMessage(text)}</div>
                </div>
            `;

            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;

            return messageId;
        }

        function addTypingIndicator() {
            const messagesDiv = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            messageId++;

            typingDiv.className = 'message message-ai';
            typingDiv.id = `message-${messageId}`;
            typingDiv.innerHTML = `
                <div class="message-bubble">
                    <div class="message-sender">🤖 InsightLab AI</div>
                    <div class="typing-indicator">
                        <span>Analyzing data</span>
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>
            `;

            messagesDiv.appendChild(typingDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;

            return messageId;
        }

        function removeMessage(id) {
            const messageDiv = document.getElementById(`message-${id}`);
            if (messageDiv) {
                messageDiv.remove();
            }
        }

        function formatMessage(text) {
            // Enhanced formatting for better readability
            let formatted = text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                .replace(/£([0-9,]+)/g, '<span class="highlight">£$1</span>')
                .replace(/([0-9]+%)/g, '<span class="highlight">$1</span>')
                .replace(/\n\n/g, '</p><p>')
                .replace(/\n/g, '<br>');

            if (!formatted.startsWith('<')) {
                formatted = '<p>' + formatted + '</p>';
            }

            return formatted;
        }

        // Enter key to send message
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Stagger chart animations on load
        document.addEventListener('DOMContentLoaded', function() {
            const chartCards = document.querySelectorAll('.chart-card');
            chartCards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
            });

            // Initialize job listings and chart zoom functionality
            initializeJobListings();
            initializeChartZoom();
        });

        // Job Listings Functionality
        let allJobs = [];
        let filteredJobs = [];
        let currentPage = 1;
        const jobsPerPage = 10;

        async function initializeJobListings() {
            try {
                await loadJobs();
                // loadJobs already calls populateFilters() and sets up listeners
                console.log('Job listings initialized successfully');
            } catch (error) {
                console.error('Failed to initialize job listings:', error);
                document.getElementById('jobListings').innerHTML =
                    '<div class="loading-jobs">Failed to load job listings</div>';
            }
        }

        async function loadJobs() {
            try {
                // Show loading state
                document.getElementById('jobListings').innerHTML = `
                    <div class="loading-jobs">
                        <i class="fas fa-spinner fa-spin"></i>
                        Loading UK AI job listings...
                    </div>
                `;

                // Fetch the CSV data
                const response = await fetch('live_uk_ai_jobs.csv');
                if (!response.ok) {
                    throw new Error('Failed to load job data');
                }
                const csvText = await response.text();

                // Parse and process jobs
                allJobs = parseCSV(csvText);
                filteredJobs = [...allJobs];

                // Update job count
                document.getElementById('jobCount').textContent =
                    `Showing ${filteredJobs.length} of ${allJobs.length} live UK AI jobs`;

                // Populate filter dropdowns
                populateFilters();

                // Display jobs with pagination
                currentPage = 1;
                displayJobs();

                // Set up event listeners for filters
                setupFilterListeners();

                console.log(`Successfully loaded ${allJobs.length} jobs`);
            } catch (error) {
                console.error('Error loading jobs:', error);
                document.getElementById('jobListings').innerHTML = `
                    <div class="error-message">
                        <i class="fas fa-exclamation-triangle"></i>
                        Failed to load job listings. Please try refreshing.
                    </div>
                `;
            }
        }

        function setupFilterListeners() {
            // Add event listeners for all filters
            document.getElementById('companyFilter').addEventListener('change', applyFilters);
            document.getElementById('locationFilter').addEventListener('change', applyFilters);
            document.getElementById('experienceFilter').addEventListener('change', applyFilters);
            document.getElementById('salaryFilter').addEventListener('change', applyFilters);
            document.getElementById('searchInput').addEventListener('input', applyFilters);
            document.getElementById('refreshJobs').addEventListener('click', loadJobs);

            // Pagination listeners
            document.getElementById('prevPage').addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    displayJobs();
                }
            });
            document.getElementById('nextPage').addEventListener('click', () => {
                const totalPages = Math.ceil(filteredJobs.length / jobsPerPage);
                if (currentPage < totalPages) {
                    currentPage++;
                    displayJobs();
                }
            });
        }

        function parseCSV(csvText) {
            console.log('Starting robust CSV parsing...');
            const lines = csvText.split('\n');
            const jobs = [];

            if (lines.length < 2) {
                console.warn('CSV file has insufficient data');
                return jobs;
            }

            // Expected headers in order
            const headers = ['job_id', 'title', 'company', 'location', 'category', 'experience_level', 'work_type', 'salary_min', 'salary_max', 'salary_avg', 'required_skills', 'description', 'posted_date', 'url', 'source', 'fetched_at'];

            let successCount = 0;
            let errorCount = 0;

            // Parse each data line starting from line 2 (skip header)
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;

                try {
                    const fields = parseCSVLineRobust(line);

                    if (fields.length >= 4) {
                        const job = {};

                        // Map fields to headers
                        headers.forEach((header, index) => {
                            let value = (fields[index] || '').toString().trim();

                            // Clean quotes from beginning and end
                            if (value.startsWith('"') && value.endsWith('"') && value.length > 1) {
                                value = value.slice(1, -1);
                            }

                            // Handle escaped quotes within the value
                            value = value.replace(/""/g, '"');

                            job[header] = value;
                        });

                        // Validate essential fields and convert salary to numbers
                        if (job.title && job.company && job.location && job.title !== 'title') {
                            // Clean and convert salary fields
                            ['salary_min', 'salary_max', 'salary_avg'].forEach(salaryField => {
                                if (job[salaryField]) {
                                    const salaryValue = parseFloat(job[salaryField]);
                                    job[salaryField] = isNaN(salaryValue) ? 0 : salaryValue;
                                }
                            });

                            jobs.push(job);
                            successCount++;
                        }
                    }
                } catch (error) {
                    errorCount++;
                    console.warn(`Error parsing line ${i}:`, error.message);
                }
            }

            console.log(`CSV parsing complete: ${successCount} jobs parsed successfully, ${errorCount} errors`);
            return jobs;
        }

        function parseCSVLineRobust(line) {
            const result = [];
            let current = '';
            let inQuotes = false;
            let i = 0;

            while (i < line.length) {
                const char = line[i];
                const nextChar = line[i + 1];

                if (char === '"') {
                    if (inQuotes && nextChar === '"') {
                        // Handle escaped quotes (double quotes)
                        current += '"';
                        i += 2;
                        continue;
                    } else {
                        // Toggle quote state
                        inQuotes = !inQuotes;
                        i++;
                        continue;
                    }
                } else if (char === ',' && !inQuotes) {
                    // Found field separator, push current field
                    result.push(current.trim());
                    current = '';
                } else {
                    // Regular character, add to current field
                    current += char;
                }
                i++;
            }

            // Push the last field
            result.push(current.trim());

            // Ensure we have at least 16 fields (pad with empty strings if needed)
            while (result.length < 16) {
                result.push('');
            }

            return result;
        }

        // Legacy function for compatibility
        function splitCSVLine(line) {
            return parseCSVLineRobust(line);
        }

        function populateFilters() {
            console.log('Starting to populate filters with', allJobs.length, 'jobs');

            // Extract unique values and filter out empty ones
            const companies = [...new Set(allJobs.map(job => job.company))]
                .filter(company => company && company.trim().length > 0 && company !== 'company')
                .sort();

            const locations = [...new Set(allJobs.map(job => job.location))]
                .filter(location => location && location.trim().length > 0 && location !== 'location')
                .sort();

            const experiences = [...new Set(allJobs.map(job => job.experience_level))]
                .filter(exp => exp && exp.trim().length > 0 && exp !== 'experience_level')
                .sort();

            const categories = [...new Set(allJobs.map(job => job.category))]
                .filter(cat => cat && cat.trim().length > 0 && cat !== 'category')
                .sort();

            const workTypes = [...new Set(allJobs.map(job => job.work_type))]
                .filter(type => type && type.trim().length > 0 && type !== 'work_type')
                .sort();

            // Log what we extracted
            console.log('Extracted filter values:', {
                companies: companies.slice(0, 5),
                locations: locations.slice(0, 5),
                experiences: experiences,
                companiesCount: companies.length,
                locationsCount: locations.length,
                experiencesCount: experiences.length
            });

            // Populate all dropdowns
            const companyResult = populateSelect('companyFilter', companies);
            const locationResult = populateSelect('locationFilter', locations);
            const experienceResult = populateSelect('experienceFilter', experiences);

            // Log the results
            console.log('Filter population results:', {
                company: companyResult,
                location: locationResult,
                experience: experienceResult
            });
        }

        function populateSelect(selectId, options) {
            const select = document.getElementById(selectId);
            if (!select) {
                console.error(`Select element not found: ${selectId}`);
                return { success: false, error: 'Element not found' };
            }

            // Clear existing options except the first (default) option
            while (select.children.length > 1) {
                select.removeChild(select.lastChild);
            }

            // Add new options
            let addedCount = 0;
            options.forEach(option => {
                if (option && option.trim().length > 0) {
                    const optionElement = document.createElement('option');
                    optionElement.value = option;
                    optionElement.textContent = option;
                    select.appendChild(optionElement);
                    addedCount++;
                }
            });

            console.log(`Populated ${selectId} with ${addedCount} options out of ${options.length} provided`);
            return { success: true, count: addedCount };
        }

        // Removed duplicate setupEventListeners - using setupFilterListeners instead

        function applyFilters() {
            const companyFilter = document.getElementById('companyFilter').value;
            const locationFilter = document.getElementById('locationFilter').value;
            const experienceFilter = document.getElementById('experienceFilter').value;
            const salaryFilter = document.getElementById('salaryFilter').value;
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            filteredJobs = allJobs.filter(job => {
                const matchesCompany = !companyFilter || job.company === companyFilter;
                const matchesLocation = !locationFilter || job.location === locationFilter;
                const matchesExperience = !experienceFilter || job.experience_level === experienceFilter;
                const matchesSalary = !salaryFilter || checkSalaryRange(job, salaryFilter);
                const matchesSearch = !searchTerm ||
                    job.title.toLowerCase().includes(searchTerm) ||
                    job.company.toLowerCase().includes(searchTerm) ||
                    job.description.toLowerCase().includes(searchTerm);

                return matchesCompany && matchesLocation && matchesExperience && matchesSalary && matchesSearch;
            });

            currentPage = 1;
            updateJobCount();
            displayJobs();
        }

        function checkSalaryRange(job, range) {
            const salary = parseFloat(job.salary_avg);
            if (!salary) return false;

            switch(range) {
                case '30000-50000': return salary >= 30000 && salary <= 50000;
                case '50000-70000': return salary >= 50000 && salary <= 70000;
                case '70000-90000': return salary >= 70000 && salary <= 90000;
                case '90000-120000': return salary >= 90000 && salary <= 120000;
                case '120000+': return salary >= 120000;
                default: return true;
            }
        }

        function displayJobs() {
            const startIdx = (currentPage - 1) * jobsPerPage;
            const endIdx = startIdx + jobsPerPage;
            const jobsToShow = filteredJobs.slice(startIdx, endIdx);

            const container = document.getElementById('jobListings');

            if (jobsToShow.length === 0) {
                container.innerHTML = '<div class="loading-jobs">No jobs match your criteria</div>';
                document.getElementById('pagination').style.display = 'none';
                return;
            }

            container.innerHTML = jobsToShow.map(job => createJobCard(job)).join('');

            // Add click listeners to job cards
            container.querySelectorAll('.job-card').forEach((card, index) => {
                card.addEventListener('click', () => showJobDetail(jobsToShow[index]));
            });

            updatePagination();
        }

        function createJobCard(job) {
            // Handle salary display
            const salary = job.salary_avg && parseFloat(job.salary_avg) > 0
                ? `£${parseFloat(job.salary_avg).toLocaleString()}`
                : 'Salary not specified';

            // Handle posted date
            const postedDate = job.posted_date ? new Date(job.posted_date).toLocaleDateString() : 'Date not available';

            // Handle description
            const description = (job.description && job.description.length > 150)
                ? job.description.substring(0, 150) + '...'
                : (job.description || 'No description available');

            // Handle work type and experience level
            const workType = job.work_type || 'Not specified';
            const experienceLevel = job.experience_level || 'Not specified';
            const category = job.category || 'General';

            return `
                <div class="job-card">
                    <div class="job-header">
                        <div>
                            <h3 class="job-title">${job.title}</h3>
                            <div class="job-company">${job.company}</div>
                            <div class="job-location">
                                <i class="fas fa-map-marker-alt"></i>
                                ${job.location}
                            </div>
                        </div>
                        <div class="job-salary">${salary}</div>
                    </div>

                    <div class="job-details">
                        <div class="job-detail-item">
                            <i class="fas fa-user-tie"></i>
                            ${job.experience_level || 'Not specified'}
                        </div>
                        <div class="job-detail-item">
                            <i class="fas fa-briefcase"></i>
                            ${job.work_type || 'Not specified'}
                        </div>
                        <div class="job-detail-item">
                            <i class="fas fa-tag"></i>
                            ${job.category || 'Not specified'}
                        </div>
                    </div>

                    <div class="job-description">${description}</div>
                    <div class="job-posted">Posted: ${postedDate}</div>
                </div>
            `;
        }

        function showJobDetail(job) {
            const salary = job.salary_avg && parseFloat(job.salary_avg) > 0
                ? `£${parseFloat(job.salary_avg).toLocaleString()}`
                : 'Salary not specified';

            const skills = job.required_skills || 'Not specified';
            const postedDate = job.posted_date ? new Date(job.posted_date).toLocaleDateString() : 'Date not available';

            const content = `
                <h2 style="color: #64b5f6; margin-bottom: 20px;">${job.title}</h2>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                    <div>
                        <h3 style="color: #81c784;">Company Details</h3>
                        <p><strong>Company:</strong> ${job.company}</p>
                        <p><strong>Location:</strong> ${job.location}</p>
                        <p><strong>Category:</strong> ${job.category || 'Not specified'}</p>
                    </div>
                    <div>
                        <h3 style="color: #ffb74d;">Job Details</h3>
                        <p><strong>Experience Level:</strong> ${job.experience_level || 'Not specified'}</p>
                        <p><strong>Work Type:</strong> ${job.work_type || 'Not specified'}</p>
                        <p><strong>Salary:</strong> ${salary}</p>
                        <p><strong>Posted:</strong> ${postedDate}</p>
                    </div>
                </div>

                <div style="margin-bottom: 25px;">
                    <h3 style="color: #ba68c8;">Required Skills</h3>
                    <p style="background: rgba(60, 60, 90, 0.5); padding: 15px; border-radius: 8px;">${skills}</p>
                </div>

                <div style="margin-bottom: 25px;">
                    <h3 style="color: #64b5f6;">Job Description</h3>
                    <div style="background: rgba(60, 60, 90, 0.3); padding: 20px; border-radius: 10px; line-height: 1.6;">
                        ${job.description}
                    </div>
                </div>

                ${job.url ? `
                <div style="text-align: center; margin-top: 30px;">
                    <a href="${job.url}" target="_blank"
                       style="background: linear-gradient(45deg, #64b5f6, #1976d2);
                              color: white; padding: 12px 25px; border-radius: 8px;
                              text-decoration: none; display: inline-block;
                              transition: all 0.3s ease;">
                        <i class="fas fa-external-link-alt"></i> View Job on Adzuna
                    </a>
                </div>
                ` : ''}
            `;

            document.getElementById('jobDetailContent').innerHTML = content;
            document.getElementById('jobDetailModal').style.display = 'block';
        }

        function updateJobCount() {
            document.getElementById('jobCount').textContent =
                `Showing ${filteredJobs.length} of ${allJobs.length} jobs`;
        }

        function updatePagination() {
            const totalPages = Math.ceil(filteredJobs.length / jobsPerPage);

            document.getElementById('prevPage').disabled = currentPage === 1;
            document.getElementById('nextPage').disabled = currentPage === totalPages;
            document.getElementById('pageInfo').textContent = `Page ${currentPage} of ${totalPages}`;

            document.getElementById('pagination').style.display = totalPages > 1 ? 'flex' : 'none';
        }

        function changePage(delta) {
            const totalPages = Math.ceil(filteredJobs.length / jobsPerPage);
            const newPage = currentPage + delta;

            if (newPage >= 1 && newPage <= totalPages) {
                currentPage = newPage;
                displayJobs();
            }
        }

        function refreshJobs() {
            const refreshBtn = document.getElementById('refreshJobs');
            const icon = refreshBtn.querySelector('i');

            icon.classList.add('fa-spin');
            refreshBtn.disabled = true;

            setTimeout(() => {
                loadJobs().then(() => {
                    applyFilters();
                    icon.classList.remove('fa-spin');
                    refreshBtn.disabled = false;
                });
            }, 1000);
        }

        // Chart Zoom Functionality
        function initializeChartZoom() {
            // Add click listeners to all chart images
            document.querySelectorAll('.chart-image').forEach(img => {
                img.addEventListener('click', function() {
                    showChartModal(this.src, this.alt);
                });
            });

            // Modal close functionality
            document.getElementById('chartClose').addEventListener('click', hideChartModal);
            document.getElementById('jobDetailClose').addEventListener('click', hideJobDetailModal);
            document.getElementById('aboutClose').addEventListener('click', hideAboutModal);

            // Close modals when clicking outside
            document.getElementById('chartModal').addEventListener('click', function(e) {
                if (e.target === this) hideChartModal();
            });

            document.getElementById('jobDetailModal').addEventListener('click', function(e) {
                if (e.target === this) hideJobDetailModal();
            });

            document.getElementById('aboutModal').addEventListener('click', function(e) {
                if (e.target === this) hideAboutModal();
            });

            // ESC key to close modals
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    hideChartModal();
                    hideJobDetailModal();
                    hideAboutModal();
                }
            });
        }

        function showChartModal(src, alt) {
            document.getElementById('chartModalImage').src = src;
            document.getElementById('chartModalImage').alt = alt;
            document.getElementById('chartModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function hideChartModal() {
            document.getElementById('chartModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function hideJobDetailModal() {
            document.getElementById('jobDetailModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function showAboutModal() {
            document.getElementById('aboutModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function hideAboutModal() {
            document.getElementById('aboutModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
    </script>

</body>
</html>